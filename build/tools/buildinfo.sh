#!/bin/bash

echo "# begin build properties"
echo "# autogenerated by buildinfo.sh"

echo "ro.build.id=$BUILD_ID"
echo "ro.build.display.id=$BUILD_DISPLAY_ID"
echo "ro.build.version.incremental=$BUILD_NUMBER"
echo "ro.build.version.sdk=$PLATFORM_SDK_VERSION"
echo "ro.build.version.codename=$PLATFORM_VERSION_CODENAME"
echo "ro.build.version.all_codenames=$PLATFORM_VERSION_ALL_CODENAMES"
echo "ro.build.version.release=$PLATFORM_VERSION"
echo "ro.build.date=`date`"
echo "ro.build.date.utc=`date +%s`"
echo "ro.build.type=$TARGET_BUILD_TYPE"
echo "ro.build.user=$USER"
echo "ro.build.host=`hostname`"
echo "ro.build.tags=$BUILD_VERSION_TAGS"
echo "ro.build.flavor=$TARGET_BUILD_FLAVOR"
echo "ro.product.model=$PRODUCT_MODEL"
echo "ro.product.brand=$PRODUCT_BRAND"
echo "ro.product.name=$PRODUCT_NAME"
echo "ro.product.device=$TARGET_DEVICE"
echo "ro.product.board=$TARGET_BOOTLOADER_BOARD_NAME"

# These values are deprecated, use "ro.product.cpu.abilist"
# instead (see below).
echo "# ro.product.cpu.abi and ro.product.cpu.abi2 are obsolete,"
echo "# use ro.product.cpu.abilist instead."
echo "ro.product.cpu.abi=$TARGET_CPU_ABI"
if [ -n "$TARGET_CPU_ABI2" ] ; then
  echo "ro.product.cpu.abi2=$TARGET_CPU_ABI2"
fi
echo "ro.product.cpu.abilist=$TARGET_CPU_ABI_LIST"
echo "ro.product.cpu.abilist32=$TARGET_CPU_ABI_LIST_32_BIT"
echo "ro.product.cpu.abilist64=$TARGET_CPU_ABI_LIST_64_BIT"

echo "ro.product.manufacturer=$PRODUCT_MANUFACTURER"
if [ -n "$PRODUCT_DEFAULT_LANGUAGE" ] ; then
  echo "ro.product.locale.language=$PRODUCT_DEFAULT_LANGUAGE"
fi
if [ -n "$PRODUCT_DEFAULT_REGION" ] ; then
  echo "ro.product.locale.region=$PRODUCT_DEFAULT_REGION"
fi
echo "ro.wifi.channels=$PRODUCT_DEFAULT_WIFI_CHANNELS"
echo "ro.board.platform=$TARGET_BOARD_PLATFORM"

echo "# ro.build.product is obsolete; use ro.product.device"
echo "ro.build.product=$TARGET_DEVICE"

echo "# Do not try to parse description, fingerprint, or thumbprint"
#Mark it because HTC define our own description
#echo "ro.build.description=$PRIVATE_BUILD_DESC"
echo "ro.build.fingerprint=$BUILD_FINGERPRINT"
if [ -n "$BUILD_THUMBPRINT" ] ; then
  echo "ro.build.thumbprint=$BUILD_THUMBPRINT"
fi
echo "ro.build.characteristics=$TARGET_AAPT_CHARACTERISTICS"


# edit by U61000 Nelson_Li for HTC properties
#echo "ro.build.description=$PRIVATE_BUILD_DESC"
MY_TIME=$(date +%Y%m%d)

HTC_ROM_VER="0.1.0.0"

echo "# Do not try to parse ro.build.description or .fingerprint"
echo "ro.build.description=$HTC_ROM_VER ($MY_TIME #$PRIVATE_BUILD_CHANGELIST) test-keys"
echo "ro.build.changelist=$PRIVATE_BUILD_CHANGELIST"

# After L, ro.build.project only contain PRIVATE_RCMS_NAME
echo "ro.build.project=$PRIVATE_RCMS_NAME"
echo "ro.build.sku=$PRIVATE_RCMS_SKU"
echo "ro.build.buildline=$PRIVATE_SKU_NAME"

#ro.product.version to set software version , request by Ty
# Default : changelist ,customized by PM
echo "ro.product.version=$PRIVATE_BUILD_CHANGELIST"

echo "ro.build.languageremove=$LANGUAGE_REMOVE_COUNT"
#add sense flag version in build.property
echo "ro.build.sense.version=$Htc_Sense_Version"
# end by Nelson_Li

# added by neil hsu: ignore sim check , prevent to stuckOnLockScreenBecauseSimMissing()
echo "keyguard.no_require_sim=1"

# edit by U61000 Nelson_Li
PROJECT_XML=project.xml
Correct_version_htcsdk="False"
if test -f $PROJECT_XML; then
  sdk_info_string=`grep "<sdk" $PROJECT_XML`

  withExtVersion=`echo $sdk_info_string | grep "extversion="`
  if test "$withExtVersion" != ""; then
    ExtVersion=`echo ${sdk_info_string#*extversion=} | cut -d '"' -f 2`
  fi

  withSdkVersion=`echo $sdk_info_string | grep "sdkversion="`
  if test "$withSdkVersion" != ""; then
    SdkVersion=`echo ${sdk_info_string#*sdkversion=} | cut -d '"' -f 2`
  fi

  HdkBaseVersion=`echo $sdk_info_string | grep "hdkbaseversion="`
  if test "$HdkBaseVersion" != ""; then
    HdkBaseVersion=`echo ${sdk_info_string#*hdkbaseversion=} | cut -d '"' -f 2`
  fi

  if test  "$ExtVersion" != "" && test "$SdkVersion" != "" && test "$HdkBaseVersion" != ""; then
      echo "ro.build.version.htcsdk=HTCExt:$ExtVersion;SDK:$SdkVersion;hdkbase:$HdkBaseVersion"
      Correct_version_htcsdk="True"
  fi
fi

if  test "$HTC_DISCLOSE_FLAG" == "true"; then
  if  test "$Correct_version_htcsdk" == "False"; then
    echo "Error of ro.build.version.htcsdk. "
    exit 1
  fi
fi
# end by Nelson_Li

# Startt Add by U61 Bill_Yang, for china_sense information
echo "ro.build.chinasense=$HTC_CHINA_SENSE_VER"
# End adding china sense

echo "# end build properties"
